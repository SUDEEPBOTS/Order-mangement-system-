<!DOCTYPE html>
<html>
<head>
    <title>Order History</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #4CAF50; color: white; }
        tr:hover { background-color: #f5f5f5; }
        .In-Progress { color: orange; }
        .Delivered { color: green; }
    </style>
</head>
<body>
    <h1>Order History</h1>
    <a href="dashboard.html" style="display: inline-block; margin-bottom: 20px;">‚Üê Back to Dashboard</a>
    
    <table id="orderTable">
        <thead>
            <tr>
                <th>Date</th>
                <th>Tracking #</th>
                <th>Address</th>
                <th>Duration</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <!-- Orders will be loaded here -->
        </tbody>
    </table>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            
            if (!user || !user.orders) {
                document.querySelector('tbody').innerHTML = 
                    '<tr><td colspan="5">No orders found</td></tr>';
                return;
            }
            
            const tbody = document.querySelector('tbody');
            tbody.innerHTML = '';
            
            user.orders.forEach(order => {
                const row = document.createElement('tr');
                
                const date = new Date(order.createdAt).toLocaleString();
                const address = `${order.towerNumber}/${order.flatNumber}`;
                const statusClass = order.status.replace(' ', '-');
                
                row.innerHTML = `
                    <td>${date}</td>
                    <td>${order.trackingNumber}</td>
                    <td>${address}</td>
                    <td>${order.duration || 'N/A'}</td>
                    <td class="${statusClass}">${order.status}</td>
                `;
                
                tbody.appendChild(row);
            });
        });
    </script>
</body>
</html>
